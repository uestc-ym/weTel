{"version":3,"sources":["webpack:///./src/client/component/Vue/mint/toast/src/toast.vue?d99d","webpack:///./src/client/component/Vue/mint/toast/index.js","webpack:///./src/client/component/Vue/mint/toast/src/toast.vue?8140","webpack:///./src/client/component/Vue/mint/toast/src/toast.vue?d8ed","webpack:///./src/client/component/Vue/mint/toast/src/toast.vue?6a00","webpack:///./src/page/home/chat.vue","webpack:///./src/client/component/Vue/mint/toast/src/toast.vue","webpack:///src/page/home/chat.vue","webpack:///./src/page/home/chat.vue?8db3","webpack:///./src/client/component/Vue/mint/toast/src/toast.js","webpack:///src/client/component/Vue/mint/toast/src/toast.vue","webpack:///./src/page/home/chat.vue?ae3d","webpack:///./src/page/home/chat.vue?9bb3","webpack:///./src/page/home/chat.vue?4530"],"names":["__webpack_require__","r","__webpack_exports__","_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_toast_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_toast_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","n","__WEBPACK_IMPORT_KEY__","key","d","default","render","_vm","this","_h","$createElement","_c","_self","attrs","name","directives","rawName","value","visible","expression","staticClass","class","customClass","style","padding","iconClass","_e","_v","padding-top","_s","message","staticRenderFns","_withStripped","_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_3_0_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_toast_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_3_0_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_toast_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","_unused_webpack_default_export","_chat_vue_vue_type_template_id_42042321_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","_chat_vue_vue_type_style_index_0_id_42042321_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_2__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","api","options","__file","_toast_vue_vue_type_template_id_81ea9686___WEBPACK_IMPORTED_MODULE_0__","_toast_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","_toast_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_2__","_superagent","_toast","_socket","$chat","data","inputMsg","messages","activated","document","body","background","toUserName","title","getMessages","deactivated","created","_this","_socket2","on","res","msg","isShouldReceiveMsg","from","userName","to","code","_toast2","concat","computed","window","user","$route","query","defaultProfile","methods","sendMsg","content","createdTime","Date","emit","isSelfMsg","_this2","_superagent2","get","end","err","errMsg","error","_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_4_0_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_less_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_0_id_42042321_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_extract_text_webpack_plugin_dist_loader_js_ref_4_0_node_modules_vue_style_loader_index_js_node_modules_css_loader_dist_cjs_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_less_loader_dist_cjs_js_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_style_index_0_id_42042321_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_vue","ToastConstructor","Vue","extend","ToastCon","toastPool","getAnInstance","length","instance","splice","el","createElement","returnAnInstance","push","removeDom","event","target","parentNode","removeChild","prototype","close","$el","addEventListener","closed","Toast","arguments","undefined","duration","clearTimeout","timer","position","className","appendChild","nextTick","removeEventListener","setTimeout","props","String","type","classes","join","_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_chat_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","_l","idx","src","profile","staticStyle","height","padding-bottom","domProps","input","$event","composing","click"],"mappings":"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","file":"static/js/chat.1a45a3d9561650d3c6a0.js","sourcesContent":["import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toast.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toast.vue?vue&type=script&lang=js&\"","export { default } from './src/toast.js';\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"transition\", { attrs: { name: \"mint-toast-pop\" } }, [\n    _c(\n      \"div\",\n      {\n        directives: [\n          {\n            name: \"show\",\n            rawName: \"v-show\",\n            value: _vm.visible,\n            expression: \"visible\"\n          }\n        ],\n        staticClass: \"mint-toast\",\n        class: _vm.customClass,\n        style: { padding: _vm.iconClass === \"\" ? \"10px\" : \"20px\" }\n      },\n      [\n        _vm.iconClass !== \"\"\n          ? _c(\"i\", { staticClass: \"mint-toast-icon\", class: _vm.iconClass })\n          : _vm._e(),\n        _vm._v(\" \"),\n        _c(\n          \"span\",\n          {\n            staticClass: \"mint-toast-text\",\n            style: { \"padding-top\": _vm.iconClass === \"\" ? \"0\" : \"10px\" }\n          },\n          [_vm._v(_vm._s(_vm.message))]\n        )\n      ]\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","export * from \"-!../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toast.vue?vue&type=template&id=81ea9686&\"","import mod from \"-!../../../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js??ref--3-0!../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/postcss-loader/src/index.js!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toast.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js??ref--3-0!../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/postcss-loader/src/index.js!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toast.vue?vue&type=style&index=0&lang=css&\"","import { render, staticRenderFns } from \"./chat.vue?vue&type=template&id=42042321&scoped=true&\"\nimport script from \"./chat.vue?vue&type=script&lang=js&\"\nexport * from \"./chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.vue?vue&type=style&index=0&id=42042321&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"42042321\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/yemao/Desktop/project/weTel/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('42042321', component.options)\n    } else {\n      api.reload('42042321', component.options)\n    }\n    module.hot.accept(\"./chat.vue?vue&type=template&id=42042321&scoped=true&\", function () {\n      api.rerender('42042321', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/page/home/chat.vue\"\nexport default component.exports","import { render, staticRenderFns } from \"./toast.vue?vue&type=template&id=81ea9686&\"\nimport script from \"./toast.vue?vue&type=script&lang=js&\"\nexport * from \"./toast.vue?vue&type=script&lang=js&\"\nimport style0 from \"./toast.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/yemao/Desktop/project/weTel/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('81ea9686', component.options)\n    } else {\n      api.reload('81ea9686', component.options)\n    }\n    module.hot.accept(\"./toast.vue?vue&type=template&id=81ea9686&\", function () {\n      api.rerender('81ea9686', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/client/component/Vue/mint/toast/src/toast.vue\"\nexport default component.exports","<template>\n<div class=\"chatPage\">\n  <div class=\"content\">\n    <div :class=\"`item ${isSelfMsg(msg.from) ? 'right' : 'left'}`\" v-for=\"(msg, idx) in messages\" :key=\"idx\">\n      <img :src=\"msg.profile || defaultProfile\" class=\"profile\" />  \n      <div class=\"msg\">{{msg.content}}</div>\n    </div>\n  </div>\n  <div style=\"height: 50px; padding-bottom: env(safe-area-inset-bottom);\" />\n  <div class=\"footer\">\n    <input v-model=\"inputMsg\" class=\"input\" />\n    <a class=\"send\" @click=\"sendMsg\">发送</a>\n  </div>\n</div>\n</template>\n\n<script>\nimport superagent from 'superagent';\nimport Toast from '@client/component/Vue/mint/toast';\nimport io from 'socket.io-client';\n \nlet $chat;\n\nexport default {\n  data() {\n    return {\n      inputMsg: '',\n      messages: [],\n\n    }\n  },\n  activated() {\n    document.body.style.background = '#ddd';\n    const name = this.toUserName;\n    document.title = name;\n\n    this.getMessages();\n  },\n  deactivated() {\n    document.body.style.background = '#fff';\n  },\n  created() {\n    $chat = io('http://ca7.fe.dev.sankuai.com/chat');\n\n    $chat.on('getMsg', (res) => {\n      let msg = res && res.msg || {};\n      let isShouldReceiveMsg = (\n        msg.from === this.userName && msg.to === this.toUserName\n      ) || (\n        msg.from === this.toUserName && msg.to === this.userName\n      )\n      if (!isShouldReceiveMsg) {\n        return\n      }\n\n      if (res.code !== 200) {\n        Toast('消息发送失败')\n      } else {\n        this.inputMsg = '';\n        this.messages = this.messages.concat(res.msg);\n      }\n    })\n  },\n  computed: {\n    userName() {\n      return window.user.name\n    },\n    toUserName() {\n      return this.$route.query.toUserName;\n    },\n    defaultProfile() {\n      return `https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1564931888461&di=4e095b77b7e16cab3c0516292caf116f&imgtype=0&src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F01%2F56%2F69%2F585747cfd354024.jpg`\n    }\n  },\n  methods: {\n    sendMsg() {\n      let msg = {\n        from: this.userName,\n        to: this.toUserName,\n        content: this.inputMsg,\n        createdTime: +new Date(),\n      }\n\n      $chat.emit('sendMsg', msg);\n    },\n    isSelfMsg(name) {\n      return name === this.userName\n    },\n    getMessages() {\n      const query = {\n        to: this.toUserName,\n      }\n\n      superagent\n      .get('/api/getmessages', query)\n      .end((err, res) => {\n        let body = res && res.body;\n        if (body.code === 200) {\n          this.messages = body.data;\n        } else {\n          const errMsg = err && err.message || body.error;\n          Toast(errMsg);\n        }\n      });\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.chatPage {\n  height: 100vh;\n  padding: 15px;\n  padding-bottom: 50px;\n  .content {\n    .item {\n      display: flex;\n      align-items: center;\n      margin-bottom: 10px;\n      .msg {\n        position: relative;\n        line-height: 40px;\n        padding: 0 8px;\n        border-radius: 3px;\n        background: #fff;\n        margin-left: 10px;\n      }\n      .profile {\n        width: 32px;\n        height: 32px;\n        border-radius: 3px;\n      }\n      &.right {\n        flex-direction: row-reverse;\n        .msg {\n          margin: 0 10px 0 0;\n          background: #0071c5;\n          color: #fff;\n        }\n      }\n    }\n  }\n  .footer {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: #eee;\n    padding: 10px 15px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    .input {\n      flex: 1;\n      height: 30px;\n      border: 0 none;\n      border-radius: 3px;\n      padding: 0 10px;\n    }\n    .send {\n      margin-left: 10px;\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/extract-text-webpack-plugin/dist/loader.js??ref--4-0!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=style&index=0&id=42042321&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/extract-text-webpack-plugin/dist/loader.js??ref--4-0!../../../node_modules/vue-style-loader/index.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=style&index=0&id=42042321&lang=less&scoped=true&\"","import Vue from 'vue';\nimport ToastCon from './toast.vue';\n\nconst ToastConstructor = Vue.extend(ToastCon);\nlet toastPool = [];\n\nlet getAnInstance = () => {\n  if (toastPool.length > 0) {\n    let instance = toastPool[0];\n    toastPool.splice(0, 1);\n    return instance;\n  }\n  return new ToastConstructor({\n    el: document.createElement('div')\n  });\n};\n\nlet returnAnInstance = instance => {\n  if (instance) {\n    toastPool.push(instance);\n  }\n};\n\nlet removeDom = event => {\n  if (event.target.parentNode) {\n    event.target.parentNode.removeChild(event.target);\n  }\n};\n\nToastConstructor.prototype.close = function() {\n  this.visible = false;\n  this.$el.addEventListener('transitionend', removeDom);\n  this.closed = true;\n  returnAnInstance(this);\n};\n\nlet Toast = (options = {}) => {\n  let duration = options.duration || 3000;\n\n  let instance = getAnInstance();\n  instance.closed = false;\n  clearTimeout(instance.timer);\n  instance.message = typeof options === 'string' ? options : options.message;\n  instance.position = options.position || 'middle';\n  instance.className = options.className || '';\n  instance.iconClass = options.iconClass || '';\n\n  document.body.appendChild(instance.$el);\n  Vue.nextTick(function() {\n    instance.visible = true;\n    instance.$el.removeEventListener('transitionend', removeDom);\n    ~duration && (instance.timer = setTimeout(function() {\n      if (instance.closed) return;\n      instance.close();\n    }, duration));\n  });\n  return instance;\n};\n\nexport default Toast;\n","<template>\n  <transition name=\"mint-toast-pop\">\n    <div class=\"mint-toast\" v-show=\"visible\" :class=\"customClass\" :style=\"{ 'padding': iconClass === '' ? '10px' : '20px' }\">\n      <i class=\"mint-toast-icon\" :class=\"iconClass\" v-if=\"iconClass !== ''\"></i>\n      <span class=\"mint-toast-text\" :style=\"{ 'padding-top': iconClass === '' ? '0' : '10px' }\">{{ message }}</span>\n    </div>\n  </transition>\n</template>\n\n<style>\n  @component-namespace mint {\n    @component toast {\n      position: fixed;\n      max-width: 80%;\n      border-radius: 5px;\n      background: rgba(0, 0, 0, 0.7);\n      color: #fff;\n      box-sizing: border-box;\n      text-align: center;\n      z-index: 3000;\n      transition: opacity .3s linear;\n\n      @descendent icon {\n        display: block;\n        text-align: center;\n        font-size: 56px;\n      }\n\n      @descendent text {\n        font-size: 14px;\n        display: block;\n        text-align: center;\n      }\n\n      @when placetop {\n        top: 50px;\n        left: 50%;\n        transform: translate(-50%, 0);\n      }\n\n      @when placemiddle {\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%);\n      }\n\n      @when placebottom {\n        bottom: 50px;\n        left: 50%;\n        transform: translate(-50%, 0);\n      }\n\n      @descendent pop-enter, pop-leave-active {\n        opacity: 0;\n      }\n    }\n  }\n</style>\n\n<script type=\"text/babel\">\n  export default {\n    props: {\n      message: String,\n      className: {\n        type: String,\n        default: ''\n      },\n      position: {\n        type: String,\n        default: 'middle'\n      },\n      iconClass: {\n        type: String,\n        default: ''\n      }\n    },\n\n    data() {\n      return {\n        visible: false\n      };\n    },\n\n    computed: {\n      customClass() {\n        var classes = [];\n        switch (this.position) {\n          case 'top':\n            classes.push('is-placetop');\n            break;\n          case 'bottom':\n            classes.push('is-placebottom');\n            break;\n          default:\n            classes.push('is-placemiddle');\n        }\n        classes.push(this.className);\n\n        return classes.join(' ');\n      }\n    }\n  };\n</script>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=script&lang=js&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"chatPage\" }, [\n    _c(\n      \"div\",\n      { staticClass: \"content\" },\n      _vm._l(_vm.messages, function(msg, idx) {\n        return _c(\n          \"div\",\n          {\n            key: idx,\n            class: \"item \" + (_vm.isSelfMsg(msg.from) ? \"right\" : \"left\")\n          },\n          [\n            _c(\"img\", {\n              staticClass: \"profile\",\n              attrs: { src: msg.profile || _vm.defaultProfile }\n            }),\n            _vm._v(\" \"),\n            _c(\"div\", { staticClass: \"msg\" }, [_vm._v(_vm._s(msg.content))])\n          ]\n        )\n      }),\n      0\n    ),\n    _vm._v(\" \"),\n    _c(\"div\", {\n      staticStyle: {\n        height: \"50px\",\n        \"padding-bottom\": \"env(safe-area-inset-bottom)\"\n      }\n    }),\n    _vm._v(\" \"),\n    _c(\"div\", { staticClass: \"footer\" }, [\n      _c(\"input\", {\n        directives: [\n          {\n            name: \"model\",\n            rawName: \"v-model\",\n            value: _vm.inputMsg,\n            expression: \"inputMsg\"\n          }\n        ],\n        staticClass: \"input\",\n        domProps: { value: _vm.inputMsg },\n        on: {\n          input: function($event) {\n            if ($event.target.composing) {\n              return\n            }\n            _vm.inputMsg = $event.target.value\n          }\n        }\n      }),\n      _vm._v(\" \"),\n      _c(\"a\", { staticClass: \"send\", on: { click: _vm.sendMsg } }, [\n        _vm._v(\"发送\")\n      ])\n    ])\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chat.vue?vue&type=template&id=42042321&scoped=true&\""],"sourceRoot":""}